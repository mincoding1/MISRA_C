## 5 MISRA C 채택 및 사용
### 5.1 채택
프로젝트 초기 단계에서 MISRA C를 채택하는 것이 이상적입니다. 기존 코드에 MISRA C를 적용할 때는, 코드 변경으로 인한 결함 발생 가능성과 MISRA C 준수의 이점을 비교해 판단해야 합니다.

### 5.2 소프트웨어 개발 프로세스
MISRA C는 문서화된 소프트웨어 개발 프로세스 내에서 사용할 때 더욱 효과적입니다. MISRA C는 개발 초기 단계부터 사용해야 재코딩, 재검토 및 재테스트의 시간을 줄일 수 있습니다. 안전 관련 소프트웨어 개발 프로세스는 IEC 61508, ISO 26262, DO-178C 등의 표준에서 확인할 수 있습니다.

### 5.2.1 MISRA C가 요구하는 프로세스 활동
MISRA C를 사용하기 위해서는 다음을 개발하고 문서화해야 합니다:

- 각 가이드라인에 대한 준수 여부를 확인할 수 있는 준수 매트릭스,
- 정당한 비준수를 허용하고 기록할 수 있는 편차 프로세스.
또한, 런타임 오류를 방지하고 이를 증명하기 위한 방법을 문서화해야 합니다.

### 5.2.2 MISRA C가 기대하는 프로세스 활동
일관된 스타일은 코드 이해에 도움이 되므로 로컬 스타일 가이드를 사용하는 것이 좋습니다. 또한, 소프트웨어 프로세스 표준에서 권장하는 소프트웨어 메트릭스를 사용해 코드 검토 및 테스트 노력을 예측하는 것도 유용하나, 구체적인 메트릭스 지침은 제공하지 않습니다.

### 5.3 준수
MISRA C 가이드라인의 모든 항목을 준수하도록 보장하기 위해 준수 매트릭스를 작성해야 합니다. 이 매트릭스는 각 가이드라인에 대해 어떻게 검사할 것인지 명시하며, 대부분의 항목은 정적 분석 도구와 컴파일러로 확인하는 것이 가장 쉽고 경제적입니다. 도구로 완전히 확인할 수 없는 경우 수동 검토가 필요합니다.

일부 자동 코드 생성 도구는 준수 매트릭스 (compliance matrix) 를 제공하여, 설정된 대로 사용할 경우 특정 MISRA C 가이드라인을 위반하지 않음을 명시합니다. 이를 통해 확인해야 할 가이드라인 수를 줄일 수 있습니다.

예시 준수 매트릭스는 표 1에서 확인할 수 있으며, 가이드라인 요약은 부록 A에 나와 있습니다. 이를 통해 전체 준수 매트릭스를 작성하는 데 도움이 될 수 있습니다.

![image](https://github.com/user-attachments/assets/78d7c678-3be0-449b-a83a-ef3c9acaa12f)

준수 매트릭스가 마련되면 컴파일러와 분석기를 설정하고, 확인이 필요한 메시지 목록을 생성합니다. 검사 과정에서 사용된 각 도구에 대해 다음 정보를 기록해야 합니다:

- 버전 번호,
- 도구 호출 시 사용된 옵션,
- 도구가 사용하는 구성 데이터.
  
### 5.3.1 컴파일러 설정
컴파일러가 C90과 C99 중 선택할 수 있는 경우, 프로젝트에 맞게 올바르게 설정해야 합니다. 최적화 옵션을 신중하게 검토하여 성능과 코드 크기의 균형을 맞추어야 하며, 컴파일러가 번역 중에 생성하는 메시지를 활용하여 잠재적인 결함을 감지할 수 있습니다.

### 5.3.2 정적 분석 도구 설정
정적 분석 도구는 일반적으로 특정 프로세서와 독립적이므로, 컴파일러의 구현 정의된 동작을 반영하도록 구성해야 합니다. C99와 C90 중 프로젝트에 맞는 버전으로 설정하고, 가능한 경우 언어 확장을 지원하도록 구성해야 합니다.

### 5.3.3 메시지 조사
MISRA C 준수 검토 중 생성된 메시지는 다음과 같은 범주로 분류됩니다:

1. 명백한 MISRA C 규칙 위반,
2. 잠재적인 MISRA C 규칙 위반,
3. 잘못된 MISRA C 규칙 위반 진단,
4. MISRA C 규칙 위반이 아닌 것의 진단.
위반 사항은 소스 코드를 수정하거나 편차를 승인하여 기록해야 하며, 모든 기록은 기술 권위자의 검토를 받아야 합니다.

### 5.4 편차 절차
MISRA C 준수가 어려운 경우 편차를 허용할 수 있으며, 이를 적절히 기록하고 승인해야 합니다. 편차는 프로젝트 편차(일관된 상황에서 규칙을 벗어나는 경우)와 특정 편차(단일 파일 내 특정 코드)로 나뉩니다. 편차 기록에는 규칙, 허용되는 상황, 위험 평가, 안전성 보장 및 편차의 잠재적 결과가 포함됩니다.

### 5.5 준수 주장
MISRA C 준수는 조직이 아닌 프로젝트 단위로 주장할 수 있습니다. 준수 주장을 위해 다음 사항을 충족해야 합니다:

1. 준수 매트릭스 작성,
2. 모든 코드가 준수하거나 승인된 편차 적용,
3. 각 편차에 대한 기록,
4. 섹션 3, 4 및 5의 지침 채택,
5. 적절한 기술 능력을 갖춘 인력.
부록 F에 체크리스트 형식으로 요약된 지침이 제공됩니다.
